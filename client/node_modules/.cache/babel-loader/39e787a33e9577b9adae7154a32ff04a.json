{"ast":null,"code":"var _jsxFileName = \"/home/mixman/rails/uploader/client/src/App.js\";\nimport React, { Component } from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport axios from 'axios';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedFile: null\n    };\n\n    this.fileSelectedHandler = event => {\n      this.setState({\n        selectedFile: event.target.files[0]\n      });\n    };\n\n    this.uploadFileHandler = () => {\n      const fd = new FormData();\n      const options = {\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        onUploadProgress: progressEvent => {\n          let result = Math.round(progressEvent.loaded / progressEvent.total * 100);\n          document.getElementById('progress').innerHTML = result + '%';\n          console.log('Uploaded ' + result + '%');\n        }\n      };\n      if (this.state.selectedFile != null) fd.append('photo[image]', this.state.selectedFile, this.state.selectedFile.name);\n      axios.post('http://localhost:3003/photos', fd, options).then(res => {\n        console.log(res);\n      });\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      style: {\n        display: 'none'\n      },\n      onChange: this.fileSelectedHandler,\n      ref: fileInput => this.fileInput = fileInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: () => this.fileInput.click(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, \"Pick a file\"), React.createElement(\"button\", {\n      onClick: this.uploadFileHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, \"Upload\"), React.createElement(\"div\", {\n      id: \"progress\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/mixman/rails/uploader/client/src/App.js"],"names":["React","Component","axios","App","state","selectedFile","fileSelectedHandler","event","setState","target","files","uploadFileHandler","fd","FormData","options","headers","onUploadProgress","progressEvent","result","Math","round","loaded","total","document","getElementById","innerHTML","console","log","append","name","post","then","res","render","display","fileInput","click"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;AAEA,OAAO,WAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,GAAN,SAAkBF,SAAlB,CAA4B;AAAA;AAAA;AAAA,SAE1BG,KAF0B,GAElB;AACNC,MAAAA,YAAY,EAAE;AADR,KAFkB;;AAAA,SAM1BC,mBAN0B,GAMJC,KAAK,IAAI;AAC7B,WAAKC,QAAL,CAAc;AACZH,QAAAA,YAAY,EAAEE,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB;AADF,OAAd;AAGD,KAVyB;;AAAA,SAY1BC,iBAZ0B,GAYN,MAAM;AACxB,YAAMC,EAAE,GAAG,IAAIC,QAAJ,EAAX;AACA,YAAMC,OAAO,GAAG;AACdC,QAAAA,OAAO,EAAC;AACN,0BAAgB,kBADV;AAEN,oBAAU;AAFJ,SADM;AAKdC,QAAAA,gBAAgB,EAAGC,aAAD,IAAmB;AACnC,cAAIC,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWH,aAAa,CAACI,MAAd,GAAuBJ,aAAa,CAACK,KAArC,GAA6C,GAAxD,CAAb;AACAC,UAAAA,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,SAApC,GAA8CP,MAAM,GAAC,GAArD;AACAQ,UAAAA,OAAO,CAACC,GAAR,CAAY,cAAcT,MAAd,GAAuB,GAAnC;AACD;AATa,OAAhB;AAWA,UAAI,KAAKd,KAAL,CAAWC,YAAX,IAA2B,IAA/B,EACAO,EAAE,CAACgB,MAAH,CAAU,cAAV,EAA0B,KAAKxB,KAAL,CAAWC,YAArC,EAAmD,KAAKD,KAAL,CAAWC,YAAX,CAAwBwB,IAA3E;AACA3B,MAAAA,KAAK,CAAC4B,IAAN,CAAW,8BAAX,EAA2ClB,EAA3C,EAA+CE,OAA/C,EACCiB,IADD,CACMC,GAAG,IAAI;AACXN,QAAAA,OAAO,CAACC,GAAR,CAAYK,GAAZ;AACD,OAHD;AAID,KA/ByB;AAAA;;AAiC1BC,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,KAAK,EAAE;AAACC,QAAAA,OAAO,EAAC;AAAT,OAFT;AAGE,MAAA,QAAQ,EAAE,KAAK5B,mBAHjB;AAIE,MAAA,GAAG,EAAE6B,SAAS,IAAI,KAAKA,SAAL,GAAiBA,SAJrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAOE;AAAQ,MAAA,OAAO,EAAE,MAAM,KAAKA,SAAL,CAAeC,KAAf,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAPF,EAQE;AAAQ,MAAA,OAAO,EAAE,KAAKzB,iBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARF,EASE;AAAK,MAAA,EAAE,EAAC,UAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,CADF;AAaD;;AA/CyB;;AAkD5B,eAAeR,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport axios from 'axios';\n\nclass App extends Component {\n\n  state = {\n    selectedFile: null\n  }\n\n  fileSelectedHandler = event => {\n    this.setState({\n      selectedFile: event.target.files[0]\n    })\n  }\n\n  uploadFileHandler = () => {\n    const fd = new FormData()\n    const options = {\n      headers:{\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      },\n      onUploadProgress: (progressEvent) => {\n        let result = Math.round(progressEvent.loaded / progressEvent.total * 100)\n        document.getElementById('progress').innerHTML=result+'%'\n        console.log('Uploaded ' + result + '%')\n      }\n    }\n    if (this.state.selectedFile != null)\n    fd.append('photo[image]', this.state.selectedFile, this.state.selectedFile.name)\n    axios.post('http://localhost:3003/photos', fd, options)\n    .then(res => {\n      console.log(res)\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <input \n          type=\"file\" \n          style={{display:'none'}}\n          onChange={this.fileSelectedHandler} \n          ref={fileInput => this.fileInput = fileInput}\n        />\n        <button onClick={() => this.fileInput.click()}>Pick a file</button>\n        <button onClick={this.uploadFileHandler}>Upload</button>\n        <div id=\"progress\"></div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}